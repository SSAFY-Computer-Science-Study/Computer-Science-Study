# 04μ¥ CPUμ μ‘λ™μ›λ¦¬

<aside>
π’΅ CPUκ°€ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•λ” λ°©μ‹μ— μ§‘μ¤‘

</aside>

**CPUμ μ‘λ™μ›λ¦¬**

- ALU μ™€ μ μ–΄μ¥μΉ
- λ μ§€μ¤ν„°
- λ…λ Ήμ–΄ μ‚¬μ΄ν΄κ³Ό μΈν„°λ½νΈ

# 4-1 ALUμ™€ μ μ–΄ μ¥μΉ

---

## β…ALU

- **λ°›μ•„λ“¤μ΄λ” μ •λ³΄**
    - **λ μ§€μ¤ν„°**λ¥Ό ν†µν•΄ ν”Όμ—°μ‚°μλ¥Ό λ°›μ•„λ“¤μ΄κ³ 
    - **μ μ–΄μ¥μΉ**λ΅λ¶€ν„° μ μ–΄ μ‹ νΈλ¥Ό λ°›μ•„λ“¤μ„
- **λ‚΄λ³΄λ‚΄λ” μ •λ³΄**
    - μ—°μ‚°μ„ μν–‰ν• κ²°κ³Ό : νΉμ • μ«μλ‚ λ¬Έμ, λ©”λ¨λ¦¬μ μ£Όμ†
        - λ©”λ¨λ¦¬μ— μ €μ¥λμ§€ μ•κ³  μΌμ‹μ μΌλ΅ **λ μ§€μ¤ν„°**μ— ****μ €μ¥λ¨
            - CPUκ°€ λ©”λ¨λ¦¬μ— μ ‘κ·Όν•λ” μ†λ„λ” λ μ§€μ¤ν„°μ— μ ‘κ·Όν•λ” μ†λ„λ³΄λ‹¤ ν›¨μ”¬ λλ¦Ό
    - ****ν”λκ·Έ** :μ—°μ‚° κ²°κ³Όμ— λ€ν• μ¶”κ°€μ μΈ μƒνƒμ •λ³΄
        - μ λ΅ ν”λκ·Έ
        
        μλ―Έ: μ—°μ‚° κ²°κ³Όκ°€ `0`μ΄λ©΄ 1λ΅ μ„¤μ •λ¨.
        
        μ‚¬μ© μμ‹: `5 - 5 = 0` β†’ `ZF = 1` (κ²°κ³Όκ°€ 0μ΄λ―€λ΅)
        
        - μΊλ¦¬ ν”λκ·Έ
        
        μλ―Έ: λ§μ… μ‹ μλ¦¬μ¬λ¦Ό(μΊλ¦¬) λ°μƒ or λΊ„μ… μ‹ μλ¦¬λ‚΄λ¦Ό(λ³΄λ΅μ°) λ°μƒ μ‹ 1λ΅ μ„¤μ •λ¨.
        
        μ‚¬μ© μμ‹: `255 (1111 1111) + 1 = 256 (1 0000 0000)` β†’ `CF = 1` (8λΉ„νΈ μ΄κ³Ό)
        
        - λ¶€νΈ ν”λκ·Έ
        
        μλ―Έ: μ—°μ‚° κ²°κ³Όκ°€ μμλ©΄ 1λ΅ μ„¤μ •λ¨ (MSBκ°€ 1).
        
        μ‚¬μ© μμ‹: `5 - 6 = -1 (1111 1111)` β†’ `SF = 1` (μμμ΄λ―€λ΅)
        
        - μ¤λ²„ν”λ΅μ° ν”λκ·Έ
        
        μλ―Έ: λ¶€νΈ μλ” μ—°μ‚°μ—μ„ κ°’μ΄ ν‘ν„ λ²”μ„λ¥Ό μ΄κ³Όν•λ©΄ 1λ΅ μ„¤μ •λ¨.
        
        μ‚¬μ© μμ‹: `127 + 1 = -128 (λ¶€νΈ λΉ„νΈ λ³€κ²½)` β†’ `OF = 1`
        
        - μΈν„°λ½νΈ ν”λκ·Έ
        
        μλ―Έ: μΈν„°λ½νΈ μ”μ²­μ„ ν—μ©ν• μ§€ μ—¬λ¶€λ¥Ό κ²°μ •ν•¨.
        
        μ‚¬μ© μμ‹: `IF = 1`μ΄λ©΄ μ™Έλ¶€ μΈν„°λ½νΈ ν—μ©, `0`μ΄λ©΄ μ°¨λ‹¨
        
        - μνΌλ°”μ΄μ € ν”λκ·Έ
        
        μλ―Έ: ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ μ½”λ“κ°€ μ»¤λ„ λ¨λ“μΈμ§€ μ‚¬μ©μ λ¨λ“μΈμ§€ λ‚νƒ€λƒ„.
        
        μ‚¬μ© μμ‹: `SF = 1`μ΄λ©΄ μ»¤λ„ λ¨λ“ (μ΄μμ²΄μ  μ½”λ“ μ‹¤ν–‰)
        

## β… μ μ–΄ μ¥μΉ

- μ μ–΄μ¥μΉκ°€ λ°›μ•„λ“¤μ΄κ³  λ‚΄λ³΄λ‚΄λ” μ •λ³΄μ— μ§‘μ¤‘

- **λ°›μ•„λ“¤μ΄λ” μ •λ³΄**
    - ν΄λ­ μ‹ νΈ
        - ν΄λ­μ΄λ€?
            - μ»΄ν“¨ν„°μ μ‹κ°„ λ‹¨μ„
            - λ‹¨ μ»΄ν“¨ν„°μ λ¨λ“  λ¶€ν’μ΄ ν΄λ­ μ‹ νΈμ— λ§μ¶° μ‘λ™ν•λ‹¤x
            - ν•λ‚μ λ…λ Ήμ–΄κ°€ μ—¬λ¬ ν΄λ­μ— κ±Έμ³ μ‹¤ν–‰ λ  μ μλ‹¤.
    - ν•΄μ„ ν•΄μ•Ό ν•  λ…λ Ήμ–΄
    - ν”λκ·Έ λ μ§€μ¤ν„° μ† ν”λκ·Έ κ°’
    - μ‹μ¤ν… λ²„μ¤, μ μ–΄ λ²„μ¤λ΅ μ „λ‹¬λ μ μ–΄ μ‹ νΈλ¥Ό λ°›μ•„λ“¤μ„

- **λ‚΄λ³΄λ‚΄λ” μ •λ³΄**
    - CPU **μ™Έλ¶€**μ— μ „λ‹¬ν•λ” μ μ–΄ μ‹ νΈ
        - = μ μ–΄ λ²„μ¤λ΅ μ μ–΄ μ‹ νΈλ¥Ό λ‚΄λ³΄λƒ„
            - λ©”λ¨λ¦¬μ— μ „λ‹¬
                - λ©”λ¨λ¦¬μ— μ €μ¥λ κ°’μ„ μ½κ±°λ‚ λ©”λ¨λ¦¬μ— μƒλ΅μ΄ κ°’μ„ μ“°κ³  μ‹¶μ„ λ•
            - μ…μ¶λ ¥ μ¥μΉμ— μ „λ‹¬
    - CPU **λ‚΄λ¶€**μ— μ „λ‹¬ν•λ” μ μ–΄ μ‹ νΈ
        - ALUμ— μ „λ‹¬
            - μν–‰ν•  μ—°μ‚°μ„ μ§€μ‹
        - λ μ§€μ¤ν„°μ— μ „λ‹¬
            - λ μ§€μ¤ν„° κ°„μ— λ°μ΄ν„°λ¥Ό μ΄λ™μ‹ν‚¤κ±°λ‚ μ €μ¥λ λ…λ Ήμ–΄λ¥Ό ν•΄μ„ν•κΈ° μ„ν•΄

- **μ μ–΄ μ¥μΉ μ£Όμ” κΈ°λ¥**
    - **λ…λ Ήμ–΄ ν•΄μ„(Instruction Decode)**
        - λ©”λ¨λ¦¬(RAM)μ—μ„ κ°€μ Έμ¨ λ…λ Ήμ–΄λ¥Ό λ¶„μ„ν•΄μ„ μ–΄λ–¤ μ‘μ—…μ„ ν•΄μ•Ό ν•λ”μ§€ νλ‹¨ν•΄.
    - **μ μ–΄ μ‹ νΈ μƒμ„±(Control Signal Generation)**
        - CPU λ‚΄λ¶€μ ALU(μ—°μ‚° μ¥μΉ), λ μ§€μ¤ν„°, λ©”λ¨λ¦¬ λ“± ν•„μ”ν• λ¶€ν’λ“¤μ—κ² **μ–Έμ , λ¬΄μ—‡μ„ ν• μ§€** μ§€μ‹ν•λ” μ‹ νΈλ¥Ό λ³΄λ‚΄.
    - **λ…λ Ήμ–΄ μ‹¤ν–‰(Instruction Execution)**
        - λ…λ Ήμ–΄μ— λ”°λΌ λ°μ΄ν„°λ¥Ό μ½κ±°λ‚, μ—°μ‚°μ„ μν–‰ν•κ±°λ‚, λ©”λ¨λ¦¬μ— μ €μ¥ν•λ” λ“±μ μ‘μ—…μ„ μ§„ν–‰ν•΄.
    - **μμ„ μ μ–΄(Sequencing & Timing Control)**
        - μ—¬λ¬ ν•λ“μ›¨μ–΄ λ¶€ν’μ΄ **μ •ν•΄μ§„ μμ„μ™€ νƒ€μ΄λ°**μ— λ§μ¶° μ‘λ™ν•λ„λ΅ κ΄€λ¦¬ν•΄.

- κµ¬μ„± μ”μ†
    - **λ…λ Ήμ–΄ λ μ§€μ¤ν„°(IR, Instruction Register)** β†’ ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ λ…λ Ήμ–΄λ¥Ό μ €μ¥
    - **ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°(PC, Program Counter)** β†’ λ‹¤μμ— μ‹¤ν–‰ν•  λ…λ Ήμ–΄μ λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό μ €μ¥
    - **λ””μ½”λ”(Decoder)** β†’ λ…λ Ήμ–΄λ¥Ό ν•΄μ„ν•΄μ„ μ–΄λ–¤ λ™μ‘μ„ ν•΄μ•Ό ν•λ”μ§€ κ²°μ •
    - **μ»¨νΈλ΅¤ μ‹ νΈ μƒμ„±κΈ°** β†’ CPU λ‚΄λ¶€ μ¥μΉμ— ν•„μ”ν• μ μ–΄ μ‹ νΈλ¥Ό λ§λ“¤μ–΄μ„ λ³΄λ‚΄

# 4-2 λ μ§€μ¤ν„°

---

<aside>
π’΅ν”„λ΅κ·Έλ¨ μ† λ…λ Ήμ–΄μ™€ λ°μ΄ν„°λ” μ‹¤ν–‰ μ „ν›„λ΅ λ°λ“μ‹ λ μ§€μ¤ν„°μ— μ €μ¥.
   λ μ§€μ¤ν„°μ— μ €μ¥λ κ°’λ§ μ κ΄€μ°°ν•΄λ„ ν”„λ΅κ·Έλ¨μ μ‹¤ν–‰ νλ¦„κ³Ό CPUλ‚΄μ—μ„ λ¬΄μ¨ μΌμ΄ λ²μ–΄μ§€λ”μ΄ μ–΄λ–¤ λ…λ Ήμ–΄κ°€ μ–΄λ–»κ² μν–‰λλ”μ§€ μ• μ μμ.

</aside>

## 1. ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ κ³Όμ •

## 2.  νΉμ • λ μ§€μ¤ν„°λ¥Ό μ΄μ©ν• μ£Όμ† μ§€μ •λ°©μ‹

### β…μ¤νƒ μ£Όμ† μ§€μ • λ°©μ‹

- **μ¤νƒμ„ μ΄μ©ν• λ°μ΄ν„° μ ‘κ·Ό λ°©μ‹μ— μ§‘μ¤‘**
- **λ°μ΄ν„° μ ‘κ·Ό λ°©μ‹**
    - μ¤νƒ ν¬μΈν„° (SP) μ΄μ©
        - ν„μ¬ μ¤νƒμ μµμƒμ„ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚΄
    - PUSH μ—°μ‚°
        - λ°μ΄ν„°λ¥Ό μ¤νƒμ— μ €μ¥
        - SP κ°’ κ°μ† (μ¤νƒμ΄ μ•„λλ΅ ν™•μ¥λ  κ²½μ°)
    - POP μ—°μ‚°
        - μ¤νƒμ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ΄
        - SP κ°’ μ¦κ°€
    - λ…λ Ήμ–΄ μ‹¤ν–‰ μ‹, μ¤νƒμ„ ν†µν•΄ ν”Όμ—°μ‚°μλ¥Ό μλ™μΌλ΅ κ°€μ Έμ΄
- **μ¥μ **
    - λ…λ Ήμ–΄κ°€ μ§§μ•„μ§ (λ…μ‹μ  μ£Όμ† ν•„μ” μ—†μ)
    - μ—°μ‚°μκ°€ μλ™μΌλ΅ μ¤νƒμ—μ„ μ²λ¦¬λ¨
    - μ„λΈλ£¨ν‹΄ νΈμ¶ λ° λ³µκ·€μ— μ μ©
- **λ‹¨μ **
    - μ„μ μ ‘κ·Όμ΄ μ–΄λ µκ³  μμ°¨μ  μ ‘κ·Όλ§ κ°€λ¥
    - SP κ΄€λ¦¬κ°€ μ¤‘μ”ν•λ©°, μ¤λ²„ν”λ΅μ° λ°μƒ κ°€λ¥

### β…λ³€μ„ μ£Όμ† μ§€μ • λ°©μ‹

- μΆ…λ¥
    - μƒλ€ μ£Όμ† μ§€μ • λ°©μ‹
    - λ² μ΄μ¤ λ μ§€μ¤ν„° μ£Όμ† μ§€μ • λ°©μ‹
- **κΈ°λ³Έ μ£Όμ†μ™€ λ³€μ„λ¥Ό ν™μ©ν• λ°©μ‹μ— μ§‘μ¤‘**

- **μƒλ€ μ£Όμ† μ§€μ • λ°©μ‹**
    - **ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„° (PC) κΈ°λ°**
        - λ…λ Ήμ–΄μ— μ§€μ •λ λ³€μ„λ¥Ό PC κ°’κ³Ό λ”ν•΄ μ ν¨ μ£Όμ† κ³„μ‚°
    - **νΉμ§•**
        - μƒλ€μ μΈ μ„μΉλ¥Ό μ‚¬μ©ν•μ—¬ μ½”λ“ μ΄λ™μ„±μ΄ λ†’μ•„μ§
        - μ‹¤ν–‰ μ¤‘μΈ ν”„λ΅κ·Έλ¨μ΄ λ‹¤λ¥Έ μ„μΉμ— λ΅λ“λμ–΄λ„ μ •μƒ μ‘λ™ κ°€λ¥
- **λ² μ΄μ¤ λ μ§€μ¤ν„° μ£Όμ† μ§€μ • λ°©μ‹**
    - **λ² μ΄μ¤ λ μ§€μ¤ν„° μ΄μ©**
        - λ…λ Ήμ–΄μ— μ§€μ •λ λ³€μ„λ¥Ό λ² μ΄μ¤ λ μ§€μ¤ν„° κ°’κ³Ό λ”ν•΄ μ ν¨ μ£Όμ† κ³„μ‚°
    - **νΉμ§•**
        - μ΄μμ²΄μ μ—μ„ λ©”λ¨λ¦¬ λ³΄νΈ λ° λ‹¤μ¤‘ μ‚¬μ©μ ν™κ²½μ— μ λ¦¬
        - νΉμ • λ μ§€μ¤ν„°λ¥Ό κΈ°μ¤€μΌλ΅ μ£Όμ†λ¥Ό κ³„μ‚°ν•λ―€λ΅ μ μ—°μ„± μ¦κ°€

# 4-3 λ…λ Ήμ–΄ μ‚¬μ΄ν΄κ³Ό μΈν„°λ½νΈ

---

<aside>
π’΅λ…λ Ήμ–΄ μ‚¬μ΄ν΄: ν•λ‚μ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬ν•λ” μ •ν•ν™”λ νλ¦„
  μΈν„°λ½νΈ: CPUλ” μ •ν•΄μ§„ νλ¦„μ— λ”°λΌ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬ν•΄ λ‚κ°€μ§€λ§ , κ°„νΉ νλ¦„μ΄ λμ–΄μ§€λ” μƒν™© λ°μƒ

</aside>

## λ…λ Ήμ–΄ μ‚¬μ΄ν΄

- CPU λ” μ •ν•΄μ§„ νλ¦„μ— λ”°λΌμ„ ν•λ‚μ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬

## μΈν„°λ½νΈ

- λ™κΈ° μΈν„°λ½νΈ
- λΉ„λ™κΈ° μΈν„°λ½νΈ

### λ™κΈ° μΈν„°λ½νΈ

- CPUμ— μν•΄ λ°μƒν•λ” μΈν„°λ½νΈ
- = μμ™Έ(exception)

### λΉ„λ™κΈ° μΈν„°λ½νΈ

- μ£Όλ΅ μ…μ¶λ ¥ μ¥μΉμ— μν•΄μ„ λ°μƒ
- μΌλ°μ μΌλ΅ λΉ„λ™κΈ° μΈν„°λ½νΈ = μΈν„°λ½νΈ
- ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ

- **ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ μ²λ¦¬ μμ„**
    1. μ…μ¶λ ¥ μ¥μΉλ” cpuμ— **μΈν„°λ½νΈ μ”μ²­ μ‹ νΈ**λ¥Ό λ³΄λƒ„
    2. cpuλ” μ‹¤ν–‰ μ‚¬μ΄ν΄μ΄ λλ‚κ³  λ…λ Ήμ–΄λ¥Ό μΈμ¶ν•κΈ° μ „ ν•­μƒ μΈν„°λ½νΈ μ—¬λ¶€ ν™•μΈ
    3. μΈν„°λ½νΈ ν”λκ·Έλ¥Ό ν†µν•΄ ν„μ¬ μΈν„°λ½νΈλ¥Ό λ°›μ„ μ μλ” μ§€ μ—¬λ¶€ ν™•μΈ
    4. CPUλ” μ§€κΈκΉμ§€μ μ‘μ—…μ„ λ°±μ—…
    5. CPUλ” **μΈν„°λ½νΈ λ²΅ν„°**λ¥Ό μ°Έμ΅°ν•μ—¬ **μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄**μ„ μ‹¤ν–‰
    6. μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ μ‹¤ν–‰μ΄ λλ‚λ©΄ 4μ—μ„ λ°±μ—…ν•΄ λ‘” μ‘μ—…μ„ λ³µκµ¬ν•μ—¬ μ‹¤ν–‰μ„ μ¬