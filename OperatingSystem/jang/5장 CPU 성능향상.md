# 5장 CPU 성능향상

### 5장 CPU 성능 향상 기법

1. **빠른 CPU를 위한 설계 기법**
    1. 클럭
    2. 코어와 멀티코어
    3. 스레드와 멀티스레드
2. **명령어 병렬 처리 기법**
    1. 명령어 파이프라인
    2. 슈퍼스칼라
    3. 비순차적 명령어 처리
3. **CISC RISC**
    1. 명령어 집합
    2. CISC
    3. RISC

  <br>  

# 5.1 빠른 CPU를 위한 설계 기법

### ✅클럭

- 클럭 속도가 높아지면 CPU는 명령어 사이클을 더 빠르게 반복하고 다른 부품들도 그에 발맞춰 더 빠르게 작동
- 클럭 속도는 헤르츠 단위로 측정.

### ✅코어와 멀티코어

- 코어 : CPU내에서 명령어를 실행하는 부품.
- 멀티 코어 : 여러개의 코어를 포함하고 있는  CPU를 말한다.
- 클럭속도가 2.4GHz인 단일 코어 CPU보다 클럭속도가 1.9Hz인 멀티코어CPU의 성능이 더 좋다.

- 코어 수 에 비례해서 연산 속도가 증가하지는 않음
    - 처리하고자 하는 작업량보다 코어수가 지나치게 많아도 성능에는 크게 영향x
    - 코어마다 처리할 명령어들을 얼마나 적절하게 분배하느냐가 중요

### ✅스레드와 멀티스레드

- **스레드**
    - 하드웨어적 스레드
        - 하나의 코어가 동시에 처리하는 명령어 단위
    - 소프트웨어적 스레드
        - 하나의 프로그램에서 독립적으로 실행되는 단위
        - 주로 프로그래밍 언어나 운영체제를 학습할 때 접하는 스레드
        - 추후 운영체제 파트에서 학습
- **멀티 스레드**
    - 하나의 코어로 여러 명령어를 동시에 처리하는 CPU

- **멀티코어**
    - **CPU 안**에 코어가 2개이상
- **멀티스레드 (프로세서)**
    - 하나의 **코어**로 여러개의 명령어 처리

<br>

# 5-2 명령어 병렬 처리기법

<aside>
💡

명령어를 빠르고 효율적으로 처리하기 위해 CPU를 한쉬도 쉬지않고 작동시키는 병렬처리기법

</aside>

<aside>
💡

CPU를 빠르게 만드는 것도 중요하지만, 놀지 않고 알뜰하게 작동시키는데에 집중

</aside>

## ✅명령어 파이파이프라인

- **정의** : CPU가 하나의 명령어를 여러 처리 단계(예: 인출, 해독, 실행 등)로 나누어, 각 단계를 분산하여 동시에 여러 명령어를 처리하는 기법
- **핵심**: 같은 단계가  겹치지만 않는다면 CPU는 각 단계를 동시에 실행할 수 있음.
- **주요 기능:**
    
    병렬 처리:
    
    각 단계에서 서로 다른 명령어를 동시에 처리하여 전체 명령어 처리 속도를 높임
    
    효율적 자원 활용:
    
    CPU의 각 부분을 연속적으로 활용함으로써 자원 낭비 없이 성능을 극대화 할 수 있음
    
- **명령어 파이프라인**
    - 인출
    - 해석
    - 실행
    - 저장

### **파이프라인 위험**

파이프라이닝(Pipelining)은 CPU가 여러 개의 명령어를 겹쳐서 실행하여 성능을 향상시키는 기술.

하지만, **일부 상황에서는 파이프라인이 원활하게 동작하지 못하고 멈추거나 지연되는 문제**

가 발생, 이러한 문제를 파이프라인 위험(Pipeline Hazard)이라고 함

- **데이터 위험**
    - 원인**:**
        - 하나의 명령어가 이전 명령어의 결과값을 필요로 할 때 발생.
        - 아직 계산이 끝나지 않은 데이터를 사용하려고 해서 발생
    - 해결:
        - 연산 결과가 바로 다음 단계로 전달되도록 함.
        - 필요한 값이 준비될 때까지 **CPU가 잠시 멈추고 기다림**.
- **제어 위험**
    - 원인**:**
        - 분기(branch) 명령어 때문에 프로그램 실행 흐름이 바뀔 때 발생.
        - 분기(Branch) 결과가 확정되지 않은 상태에서 잘못된 명령어를 실행할 가능성이 있음
    - 해결
        - CPU가 분기 방향을 미리 예측하여 명령어를 실행.
        - 맞으면 성능 향상, 틀리면 롤백(파이프라인 플러시)
        - 분기 명령어 이후의 몇 개의 명령어를 무조건 실행하고 나서 분기를 수행.
        - 잘못된 명령어를 폐기하고 다시 가져옴(성능 저하 발생).
- **구조적 위험**
    - 원인**:**
        - 두 개 이상의 명령어가 **동시에 같은 하드웨어 자원을 사용하려 할 때** 발생.

### 
<br>


## ✅슈퍼스칼라

- CPU 내부에 여러 개의 명령어 파이프 라인을 포함한 구조
- 공장에 공장 생산 라인을 여러개 두는 것
- 이론적으로 파이프라인 개수에 비례해서 프로그램 처리 속도가 빨라짐
<br>

## ✅비순차적 명령어 처리 기법

- 파이프라인의 중단을 방지하기 위해 명령어를 순차적으로 처리하지 않는 기법

<br>

# 5-3 CISC 와 RISC

<aside>
💡

CPU의 언어인 ISA 

</aside>

<aside>
💡

CPU 주요 설계방식인 CISC와 RISC의 정의와 차이점 

</aside>

- 명령어가 파이프라이닝에 최적화되어 있어야 함

<br>

## ✅명령어 집합

- CPU 가 이해할 수 있는 명령어들의 모음
    - 명령어 집합, 명령어 집합 구조, ISA
- ISA가 다르다
    - CPU가 이해할 수 있는 명령어가 다르다
        - 명령어가 달라지면 어셈블리어도 달라짐

## ✅CISC

- 복잡한 명령어를 제공하여, 한 개의 명령어로 여러 작업을 처리하도록 설계됨.
- 메모리와 직접 연산이 가능하여 코드 길이가 짧아짐.
- 하지만 **명령어 실행 속도가 느려지고** CPU 내부 구조가 복잡해짐

- 특징
    - 다양한 명령어 제공
    - 명령어 실행에 여러 클럭 사이클 필요
    - **메모리에서 직접 연산 가능** (LOAD 없이 연산 수행 가능)
    - 하드웨어 설계가 복잡하여 전력 소모가 많음

## ✅RISC

- 단순한 명령어 세트를 사용하여 빠르게 실행하는 방식.
- **Load/Store 구조** → 모든 연산이 레지스터에서 이루어지고, 메모리 접근은 최소화.
- 하드웨어 설계가 단순하여 **전력 소모가 적고, 고속 연산이 가능**.

- **특징**
    - 명령어 실행 속도가 빠름 (대부분 1클럭 사이클)
    - **메모리 접근 최소화** (연산은 반드시 레지스터에서 수행)
    - 하드웨어가 단순하여 저전력 설계가 가능